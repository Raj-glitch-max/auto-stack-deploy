apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: autostack

resources:
  - namespace.yaml
  - backend-deployment.yaml
  - backend-service.yaml
  - frontend-deployment.yaml
  - frontend-service.yaml
  - database-deployment.yaml
  - database-service.yaml
  - database-pvc.yaml
  - prometheus-deployment.yaml
  - prometheus-service.yaml
  - prometheus-configmap.yaml
  - grafana-deployment.yaml
  - grafana-service.yaml
  - ingress.yaml

configMapGenerator:
  - name: autostack-config
    literals:
      - ALGORITHM=HS256
      - ACCESS_TOKEN_EXPIRE_MINUTES=1440
      - REFRESH_TOKEN_EXPIRE_DAYS=30
      - FRONTEND_URL=http://localhost:3000

secretGenerator:
  - name: autostack-secrets
    envs:
      - secrets.env

commonLabels:
  app: autostack
  managed-by: argocd
